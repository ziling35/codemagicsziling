# ✅ 集成待办清单

使用这个清单来跟踪你的集成进度。完成一项就打勾 ✓

---

## 📋 准备工作

- [ ] 阅读 [QUICK_START.md](./QUICK_START.md)
- [ ] 浏览 [USAGE_GUIDE.md](./USAGE_GUIDE.md)
- [ ] 查看 [INTEGRATION_EXAMPLE.md](./INTEGRATION_EXAMPLE.md)
- [ ] 备份现有代码

---

## 🏆 第一步：集成成就系统（约15分钟）

### Level.js 修改

- [ ] 导入 `achievementManager` 和 `AchievementNotification`
- [ ] 添加状态：`achievements`, `levelStartTime`, `usedHints`
- [ ] 在 `useEffect` 中记录 `levelStartTime`
- [ ] 在关卡完成时调用 `achievementManager.updateStats()`
- [ ] 渲染 `AchievementNotification` 组件

**测试：**
- [ ] 完成一个关卡
- [ ] 查看是否弹出成就通知
- [ ] 检查浏览器 localStorage 中是否保存了数据

### MainPage.js 修改

- [ ] 导入 `AchievementsPanel`
- [ ] 添加状态：`showAchievements`
- [ ] 修改 `ModuleCard` 添加 `onAchievementsClick` 属性
- [ ] 渲染 `AchievementsPanel` 组件

**测试：**
- [ ] 点击成就按钮
- [ ] 查看成就面板是否正常显示
- [ ] 检查成就列表和统计数据

---

## 🎯 第二步：集成挑战系统（约10分钟）

### 创建挑战选择界面

- [ ] 导入 `challengeManager` 和 `DailyChallenges`
- [ ] 添加状态：`showDailyChallenges`, `activeChallenge`
- [ ] 创建挑战激活按钮
- [ ] 渲染 `DailyChallenges` 组件

### Level.js 添加倒计时

- [ ] 导入 `CountdownTimer`
- [ ] 检查激活的时间挑战
- [ ] 条件渲染 `CountdownTimer`
- [ ] 处理超时回调

**测试：**
- [ ] 激活一个时间挑战
- [ ] 查看倒计时器是否显示
- [ ] 测试超时处理
- [ ] 查看每日挑战面板

---

## ✨ 第三步：添加视觉效果（约20分钟）

### 粒子效果

- [ ] 导入粒子效果组件
- [ ] 添加状态：`particleEffects`
- [ ] 在收集宝石时显示 `GemCollectEffect`
- [ ] 在完成关卡时显示 `VictoryEffect`
- [ ] 渲染粒子效果列表

**测试：**
- [ ] 收集宝石查看粒子效果
- [ ] 完成关卡查看胜利效果
- [ ] 检查性能（不应卡顿）

### 连击计数器

- [ ] 导入 `ComboCounter`
- [ ] 添加状态：`combo`
- [ ] 在成功操作时增加连击
- [ ] 渲染 `ComboCounter` 组件

**测试：**
- [ ] 连续收集宝石
- [ ] 查看连击数字增长
- [ ] 测试5连击以上的特殊效果

### 庆祝动画

- [ ] 导入 `CelebrationAnimation`
- [ ] 添加状态：`celebrate`
- [ ] 在关卡完成时设置 `celebrate = true`
- [ ] 渲染 `CelebrationAnimation` 组件

**测试：**
- [ ] 完成关卡
- [ ] 查看彩纸雨效果
- [ ] 检查自动关闭

---

## 🎨 第四步：UI 组件集成（约15分钟）

### 提示系统

- [ ] 导入 `HintSystem`
- [ ] 准备提示内容（轻提示、详细提示、解答）
- [ ] 添加 `onHintUsed` 回调
- [ ] 渲染 `HintSystem` 组件

**测试：**
- [ ] 点击提示按钮
- [ ] 切换不同级别的提示
- [ ] 验证提示使用被记录

### 快捷键系统

- [ ] 导入 `keyboardManager` 和 `ShortcutsHelp`
- [ ] 在 `useEffect` 中注册快捷键
- [ ] 渲染 `ShortcutsHelp` 组件
- [ ] 添加清理函数

**测试：**
- [ ] 按 Ctrl+Enter 运行代码
- [ ] 按 Esc 停止
- [ ] 按 ? 查看快捷键帮助
- [ ] 测试其他快捷键

### 新手引导（可选）

- [ ] 导入 `Tutorial`
- [ ] 准备引导步骤
- [ ] 在第一个关卡渲染 `Tutorial`
- [ ] 测试完成流程

**测试：**
- [ ] 清除 localStorage
- [ ] 进入第一个关卡
- [ ] 完成引导流程
- [ ] 验证不再显示

---

## 📱 第五步：响应式优化（约10分钟）

- [ ] 在移动设备上测试所有组件
- [ ] 检查触摸交互
- [ ] 调整小屏幕上的布局
- [ ] 测试不同分辨率

---

## 🎯 第六步：性能优化（约10分钟）

- [ ] 使用 React.memo 包装组件
- [ ] 添加 useMemo 缓存计算
- [ ] 添加 useCallback 缓存函数
- [ ] 检查不必要的重新渲染
- [ ] 限制粒子效果数量

---

## 🧪 第七步：测试（约20分钟）

### 功能测试

- [ ] 测试成就解锁
- [ ] 测试挑战完成
- [ ] 测试所有视觉效果
- [ ] 测试快捷键
- [ ] 测试提示系统

### 边界测试

- [ ] 测试清空 localStorage
- [ ] 测试快速连续操作
- [ ] 测试多个粒子效果同时显示
- [ ] 测试长时间游戏

### 兼容性测试

- [ ] Chrome
- [ ] Firefox
- [ ] Safari
- [ ] Edge
- [ ] 移动浏览器

---

## 📝 第八步：文档和收尾（约10分钟）

- [ ] 添加代码注释
- [ ] 更新 README
- [ ] 记录已知问题
- [ ] 准备演示视频/截图

---

## 🎨 可选：自定义样式

- [ ] 修改主题颜色
- [ ] 调整动画时长
- [ ] 自定义粒子效果
- [ ] 设计新的成就图标

---

## 🚀 完成检查

### 基本功能

- [ ] 所有新组件正常渲染
- [ ] 没有控制台错误
- [ ] 没有内存泄漏
- [ ] 数据正常保存和加载

### 用户体验

- [ ] 动画流畅
- [ ] 交互响应快速
- [ ] 提示清晰易懂
- [ ] 视觉效果吸引人

### 性能

- [ ] 帧率稳定（>30fps）
- [ ] 加载时间合理（<3秒）
- [ ] 内存使用正常
- [ ] 移动端流畅

---

## 📊 进度追踪

**总任务数：** 约 80 项
**预计时间：** 2-3 小时
**当前进度：** ____%

---

## 💡 提示

### 如果遇到问题：

1. **成就不显示？**
   - 检查是否调用了 `updateStats()`
   - 查看 localStorage 中的数据
   - 检查控制台错误

2. **粒子效果卡顿？**
   - 减少粒子数量（count 参数）
   - 检查是否有太多效果同时显示
   - 考虑在低性能设备上禁用

3. **快捷键不工作？**
   - 确保调用了 `keyboardManager.enable()`
   - 检查是否有其他元素捕获了键盘事件
   - 查看浏览器是否拦截了某些快捷键

4. **数据不保存？**
   - 检查浏览器是否禁用了 localStorage
   - 不要在隐私模式下测试
   - 查看存储配额

---

## 🎉 完成后

恭喜！你已经成功集成了所有新功能！

### 下一步：

- [ ] 部署到测试环境
- [ ] 收集用户反馈
- [ ] 继续优化和改进
- [ ] 添加更多成就和挑战
- [ ] 考虑添加排行榜
- [ ] 开发多人模式

---

## 📞 需要帮助？

- 📖 查看详细文档
- 💬 查看代码注释
- 🐛 提交 Issue
- 💡 分享你的想法

---

**开始你的集成之旅吧！🚀**

*提示：建议按顺序完成，每完成一步就测试一次。*
